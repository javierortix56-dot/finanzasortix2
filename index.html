<!DOCTYPE html>

<html lang="es">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Finanzas J&M Final</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    

    <style>

        :root {

            --bg: #F3F4F6; --surface: #FFFFFF; --primary: #2563EB; 

            --text-1: #1F2937; --text-2: #6B7280; --border: #E5E7EB;

            --success: #10B981; --danger: #EF4444;

        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 0 0 100px 0; color: var(--text-1); font-size: 13px; }



        /* HEADER */

        .header { 

            background: var(--surface); padding: 12px 15px; position: sticky; top: 0; z-index: 50;

            border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;

        }

        .logo { font-weight: 800; color: var(--primary); font-size: 15px; display: flex; align-items: center; gap: 6px; }

        

        /* NAV MES */

        .month-nav { 

            display: flex; align-items: center; background: #F9FAFB; border: 1px solid var(--border); 

            border-radius: 8px; padding: 2px; position: relative;

        }

        .nav-btn { 

            border: none; background: transparent; padding: 8px 14px; cursor: pointer; 

            color: var(--text-2); font-size: 14px; display: flex; align-items: center;

            position: relative; z-index: 20;

        }

        .nav-btn:active { background: #E5E7EB; border-radius: 6px; color: var(--primary); }

        .month-label { 

            font-weight: 700; font-size: 13px; text-transform: uppercase; padding: 0 5px; 

            min-width: 75px; text-align: center; position: relative;

        }

        #dateInput { position: absolute; top:0; left:0; width:100%; height:100%; opacity:0; z-index: 10; cursor: pointer; }



        /* KPIs */

        .kpi-row { display: flex; gap: 8px; overflow-x: auto; padding: 10px 15px; }

        .kpi { 

            min-width: 120px; flex: 1; background: var(--surface); padding: 8px 12px; 

            border-radius: 8px; border: 1px solid var(--border);

        }

        .kpi-head { font-size: 10px; color: var(--text-2); font-weight: 700; text-transform: uppercase; margin-bottom: 2px; }

        .kpi-num { font-size: 16px; font-weight: 700; }

        .inp-mini { border: 1px solid var(--border); width: 60px; border-radius: 4px; padding: 2px; font-weight: 600; }



        /* TABS */

        .view-tabs { display: flex; padding: 0 15px; gap: 10px; margin-bottom: 10px; }

        .tab { flex: 1; padding: 8px; text-align: center; background: #E5E7EB; border-radius: 6px; font-weight: 600; color: var(--text-2); font-size: 12px; cursor: pointer; }

        .tab.active { background: var(--primary); color: white; }



        /* MAIN CONTENT */

        .main-container { padding: 0 10px; } /* Padding reducido lateralmente */



        /* VISTA T (OPTIMIZADA PARA ESPACIO) */

        .t-container { display: flex; gap: 1px; background: var(--border); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }

        .t-col { flex: 1; background: var(--surface); display: flex; flex-direction: column; min-width: 0; } /* min-width 0 ayuda al flex */

        .t-head { padding: 6px; text-align: center; font-weight: 700; color: white; font-size: 11px; }

        .t-head.inc { background: var(--success); }

        .t-head.exp { background: var(--danger); }

        .t-list { padding: 0; margin: 0; list-style: none; }

        

        .t-row { 

            padding: 6px 4px; /* Padding reducido */

            border-bottom: 1px solid #F3F4F6; font-size: 11px; cursor: pointer;

            display: flex; justify-content: space-between; align-items: center; gap: 4px;

        }

        .t-date-badge { 

            font-weight: 700; color: var(--text-2); font-size: 9px; min-width: 16px; text-align: center; 

        }

        .date-alert { color: var(--danger); font-weight: 800; background: #FEF2F2; border-radius: 4px; padding: 1px 2px; }



        .t-desc { 

            font-weight: 500; color: var(--text-1); font-size: 10px; /* Letra mas chica */

            white-space: nowrap; overflow: hidden; text-overflow: ellipsis; 

            flex: 1; 

        }

        .t-amt { font-weight: 700; font-size: 11px; white-space: nowrap; } /* Letra mas chica */

        .t-total { padding: 6px; text-align: right; font-weight: 800; font-size: 12px; background: #F9FAFB; border-top: 1px solid var(--border); }



        /* VISTA LISTA */

        .list-row { 

            background: var(--surface); padding: 0 10px; height: 48px; margin-bottom: 1px;

            display: grid; grid-template-columns: 30px 25px 1fr auto 40px; align-items: center; gap: 8px;

            border-bottom: 1px solid #F3F4F6;

        }

        .l-check { font-size: 16px; color: #D1D5DB; display: flex; justify-content: center; }

        .l-check.done { color: var(--success); }

        .l-date { font-weight: 700; color: var(--text-2); font-size: 11px; text-align: center; background: #F3F4F6; padding: 2px 0; border-radius: 4px; }

        .l-desc { font-weight: 500; color: var(--text-1); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .l-amt { font-weight: 700; font-size: 13px; text-align: right; }

        .inc { color: var(--success); } .exp { color: var(--text-1); }

        .act-btn { border: none; background: none; color: #9CA3AF; padding: 4px; font-size: 12px; }



        /* FAB */

        .fab { 

            position: fixed; bottom: 30px; right: 20px; width: 56px; height: 56px; 

            background: var(--primary); color: white; border-radius: 50%; 

            display: flex; align-items: center; justify-content: center; 

            box-shadow: 0 4px 12px rgba(37,99,235,0.4); font-size: 24px; cursor: pointer; z-index: 1000;

        }



        /* MODAL */

        #modal { 

            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 

            background: rgba(0,0,0,0.6); z-index: 2000; align-items: flex-end; backdrop-filter: blur(2px);

        }

        .modal-content { 

            background: var(--surface); width: 100%; border-top-left-radius: 20px; border-top-right-radius: 20px; 

            padding: 25px 20px; animation: slideUp 0.2s; 

        }

        @keyframes slideUp { from{transform:translateY(100%)} to{transform:translateY(0)} }

        

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }

        .inp-full { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; font-size: 15px; background: white; -webkit-appearance: none; }

        .btn-main { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 15px; margin-top: 10px; }

        .btn-sec { width: 100%; padding: 12px; background: transparent; color: var(--text-2); border: none; margin-top: 5px; }



        /* TOOLS */

        .tools { margin-top: 40px; padding: 20px; text-align: center; background: #F9FAFB; border-top: 1px solid var(--border); }

        .link { color: var(--primary); text-decoration: none; font-size: 12px; font-weight: 600; margin: 0 15px; cursor: pointer; display: inline-flex; align-items: center; gap: 5px; }

        

        #chartBackBtn { display:none; width:100%; margin-top:10px; background:#E5E7EB; color:var(--text-1); border:none; padding:8px; border-radius:6px; font-weight:600; }

    </style>

</head>

<body>



    <div class="header">

        <div class="logo"><i class="fas fa-wallet"></i> &nbsp;J&M</div>

        <div style="display:flex; align-items:center;">

            <div class="month-nav">

                <button class="nav-btn" onclick="addMonth(-1)"><i class="fas fa-chevron-left">
